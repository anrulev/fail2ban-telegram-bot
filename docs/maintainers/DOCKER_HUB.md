# Fail2Ban Telegram Bot ‚Äî Docker Hub (–¥–ª—è –º–µ–π–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –º–µ–π–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –ù–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º README.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –æ–±—Ä–∞–∑

–≠—Ç–æ—Ç Docker-–æ–±—Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–µ—Ç Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:
- üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –ª–æ–≥-—Ñ–∞–π–ª Fail2Ban –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üö® –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö –≤ Telegram
- üìä –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ Fail2Ban
- üîí –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö "—Ç—é—Ä—å–º–∞—Ö" (jails)

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –æ–±—Ä–∞–∑

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Fail2Ban, —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ
- –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç–µ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather))
- ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
docker run -d \
  --name fail2ban-telegram-bot \
  --restart unless-stopped \
  -v /var/log/fail2ban.log:/var/log/fail2ban.log:ro \
  -e TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here \
  -e TELEGRAM_CHAT_ID=your_chat_id_here \
  yourusername/fail2ban-telegram-bot
```

### –ó–∞–ø—É—Å–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `docker-compose.yml`:

```yaml
version: '3'

services:
  fail2ban-bot:
    image: yourusername/fail2ban-telegram-bot
    container_name: fail2ban-telegram-bot
    restart: unless-stopped
    volumes:
      - /var/log/fail2ban.log:/var/log/fail2ban.log:ro
      - ./logs:/app/logs
    environment:
      - TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
      - TELEGRAM_CHAT_ID=your_chat_id_here
      - FAIL2BAN_LOG_FILE=/var/log/fail2ban.log
      - CHECK_INTERVAL=60
      - MAX_ALERTS_PER_RUN=10
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
mkdir -p logs
docker-compose up -d
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `TELEGRAM_BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ | (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| `TELEGRAM_CHAT_ID` | ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| `FAIL2BAN_LOG_FILE` | –ü—É—Ç—å –∫ –ª–æ–≥-—Ñ–∞–π–ª—É Fail2Ban –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | `/var/log/fail2ban.log` |
| `CHECK_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∞ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) | `60` |
| `MAX_ALERTS_PER_RUN` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∑–∞ –æ–¥–Ω—É –ø—Ä–æ–≤–µ—Ä–∫—É | `10` |
| `ENABLE_FAIL2BAN_STATUS` | –í–∫–ª—é—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã `/status` –∏ `/jails` (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ `fail2ban-client`) | `false` |
| `BOT_LOG_FILE` | –ü—É—Ç—å –∫ –ª–æ–≥-—Ñ–∞–π–ª—É –±–æ—Ç–∞ | `/app/logs/fail2ban_bot.log` |

## –¢–æ–º–∞ (Volumes)

| –ü—É—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------|----------|
| `/var/log/fail2ban.log` | –õ–æ–≥-—Ñ–∞–π–ª Fail2Ban (—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è) |
| `/app/logs` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤ —Å–∞–º–æ–≥–æ –±–æ—Ç–∞ |

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` –∏–ª–∏ `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
- `/status` - –ü–æ–∫–∞–∑–∞—Ç—å –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å Fail2Ban
- `/jails` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö "—Ç—é—Ä–µ–º" (jails)
- `/latest` - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –õ–æ–≥-—Ñ–∞–π–ª Fail2Ban –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ —Å–æ–∫–µ—Ç—É Fail2Ban –∏–ª–∏ –¥—Ä—É–≥–∏–º —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –≠—Ç–æ—Ç –æ–±—Ä–∞–∑ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Fail2Ban. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ Fail2Ban —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ.
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥-—Ñ–∞–π–ª—É Fail2Ban. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è:
  ```bash
  sudo chmod a+r /var/log/fail2ban.log
  ```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ ID —á–∞—Ç–∞ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥-—Ñ–∞–π–ª—É Fail2Ban
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
  ```bash
  docker logs fail2ban-telegram-bot
  ```

### –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–≥-—Ñ–∞–π–ª—É

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–≥-—Ñ–∞–π–ª Fail2Ban, –≤—ã –º–æ–∂–µ—Ç–µ:

1. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É:
   ```bash
   sudo chmod a+r /var/log/fail2ban.log
   ```

2. –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–µ–∂–∏–º–æ–º (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):
   ```yaml
   services:
     fail2ban-bot:
       # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...
       privileged: true
   ```

## –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [GitHub](https://github.com/anrulev/fail2ban-telegram-bot).


